import{g as ke,l as me,t as O,a as D,i as be,e as C,d as Te}from"../chunks/DRBS-7s1.js";import{i as ne}from"../chunks/ucBC-1PJ.js";import{w as S,x as Ee,v as ye,g as h,K as F,y as Ae,z as W,A as Z,B as K,G as H,a2 as we,C as ie,D as ve,F as Se,a6 as oe,i as ze,Q as L,ao as j,ap as U,a8 as ee,aq as Ne,ar as xe,as as Ie,a5 as Me,at as Ce,au as De,av as Le,aw as Oe,_ as Re,ax as He,ay as qe,az as Be,aA as Ve,a as Ke,aj as Ue,p as ce,m as y,o as A,t as Y,k as fe,q as N,O as E,aB as Ye,aC as Ge,aD as Je,aE as Fe,j as Pe}from"../chunks/9_KPTGlP.js";import{s as ae,a as Qe}from"../chunks/DsohvIUY.js";import{p as Xe,i as P}from"../chunks/DGzdpQHu.js";import{c as $e,o as We}from"../chunks/CCq1ID2e.js";function Ze(e,t,a,s){for(var l=[],n=t.length,i=0;i<n;i++)Ie(t[i].e,l,!0);var f=n>0&&l.length===0&&a!==null;if(f){var u=a.parentNode;Me(u),u.append(a),s.clear(),M(e,t[0].prev,t[n-1].next)}Ce(l,()=>{for(var k=0;k<n;k++){var v=t[k];f||(s.delete(v.k),M(e,v.prev,v.next)),De(v.e,!f)}})}function je(e,t,a,s,l,n=null){var i=e,f={flags:t,items:new Map,first:null};S&&Ee();var u=null,k=!1,v=F(()=>{var p=a();return ze(p)?p:p==null?[]:oe(p)});ye(()=>{var p=h(v),o=p.length;if(k&&o===0)return;k=o===0;let g=!1;if(S){var d=i.data===Ae;d!==(o===0)&&(i=W(),Z(i),K(!1),g=!0)}if(S){for(var w=null,c,r=0;r<o;r++){if(H.nodeType===8&&H.data===we){i=H,g=!0,K(!1);break}var _=p[r],m=s(_,r);c=ue(H,f,w,null,_,m,r,l,t,a),f.items.set(m,c),w=c}o>0&&Z(W())}S||ea(p,f,i,l,t,s,a),n!==null&&(o===0?u?ie(u):u=ve(()=>n(i)):u!==null&&Se(u,()=>{u=null})),g&&K(!0),h(v)}),S&&(i=H)}function ea(e,t,a,s,l,n,i){var f=e.length,u=t.items,k=t.first,v=k,p,o=null,g=[],d=[],w,c,r,_;for(_=0;_<f;_+=1){if(w=e[_],c=n(w,_),r=u.get(c),r===void 0){var m=v?v.e.nodes_start:a;o=ue(m,t,o,o===null?t.first:o.next,w,c,_,s,l,i),u.set(c,o),g=[],d=[],v=o.next;continue}if(aa(r,w,_),(r.e.f&U)!==0&&ie(r.e),r!==v){if(p!==void 0&&p.has(r)){if(g.length<d.length){var b=d[0],T;o=b.prev;var z=g[0],I=g[g.length-1];for(T=0;T<g.length;T+=1)te(g[T],b,a);for(T=0;T<d.length;T+=1)p.delete(d[T]);M(t,z.prev,I.next),M(t,o,z),M(t,I,b),v=b,o=I,_-=1,g=[],d=[]}else p.delete(r),te(r,v,a),M(t,r.prev,r.next),M(t,r,o===null?t.first:o.next),M(t,o,r),o=r;continue}for(g=[],d=[];v!==null&&v.k!==c;)(v.e.f&U)===0&&(p??(p=new Set)).add(v),d.push(v),v=v.next;if(v===null)continue;r=v}g.push(r),o=r,v=r.next}if(v!==null||p!==void 0){for(var x=p===void 0?[]:oe(p);v!==null;)(v.e.f&U)===0&&x.push(v),v=v.next;var q=x.length;if(q>0){var B=null;Ze(t,x,B,u)}}ee.first=t.first&&t.first.e,ee.last=o&&o.e}function aa(e,t,a,s){xe(e.v,t),e.i=a}function ue(e,t,a,s,l,n,i,f,u,k){var v=(u&Le)!==0,p=(u&Oe)===0,o=v?p?L(l):j(l):l,g=(u&Ne)===0?i:j(i),d={i:g,v:o,k:n,a:null,e:null,prev:a,next:s};try{return d.e=ve(()=>f(e,o,g,k),S),d.e.prev=a&&a.e,d.e.next=s&&s.e,a===null?t.first=d:(a.next=d,a.e.next=d.e),s!==null&&(s.prev=d,s.e.prev=d.e),d}finally{}}function te(e,t,a){for(var s=e.next?e.next.e.nodes_start:a,l=t?t.e.nodes_start:a,n=e.e.nodes_start;n!==s;){var i=Re(n);l.before(n),n=i}}function M(e,t,a){t===null?e.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}const se=[...` 	
\r\f \v\uFEFF`];function ta(e,t,a){var s=e==null?"":""+e;if(a){for(var l in a)if(a[l])s=s?s+" "+l:l;else if(s.length)for(var n=l.length,i=0;(i=s.indexOf(l,i))>=0;){var f=i+n;(i===0||se.includes(s[i-1]))&&(f===s.length||se.includes(s[f]))?s=(i===0?"":s.substring(0,i))+s.substring(f+1):i=f}}return s===""?null:s}function le(e,t,a,s,l,n){var i=e.__className;if(S||i!==a||i===void 0){var f=ta(a,s,n);(!S||f!==e.getAttribute("class"))&&(f==null?e.removeAttribute("class"):e.className=f),e.__className=a}else if(n&&l!==n)for(var u in n){var k=!!n[u];(l==null||k!==!!l[u])&&e.classList.toggle(u,k)}return n}const sa=Symbol("is custom element"),la=Symbol("is html");function Q(e){if(S){var t=!1,a=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var s=e.value;re(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var l=e.checked;re(e,"checked",null),e.checked=l}}};e.__on_r=a,He(a),ke()}}function ra(e,t){var a=de(e);a.checked!==(a.checked=t??void 0)&&(e.checked=t)}function re(e,t,a,s){var l=de(e);S&&(l[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||l[t]!==(l[t]=a)&&(t==="loading"&&(e[qe]=a),e.removeAttribute(t))}function de(e){return e.__attributes??(e.__attributes={[sa]:e.nodeName.includes("-"),[la]:e.namespaceURI===Be})}function X(e,t,a=t){var s=Ve();me(e,"input",l=>{var n=l?e.defaultValue:e.value;if(n=G(e)?J(n):n,a(n),s&&n!==(n=t())){var i=e.selectionStart,f=e.selectionEnd;e.value=n??"",f!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(f,e.value.length))}}),(S&&e.defaultValue!==e.value||Ke(t)==null&&e.value)&&a(G(e)?J(e.value):e.value),Ue(()=>{var l=t();G(e)&&l===J(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}function G(e){var t=e.type;return t==="number"||t==="range"}function J(e){return e===""?null:+e}var na=O('<div class="task-edit svelte-pa5evz"><input type="text" placeholder="Titolo attività" class="svelte-pa5evz"> <textarea placeholder="Aggiungi dettagli o note..." rows="3" class="svelte-pa5evz"></textarea> <div class="edit-buttons svelte-pa5evz"><button class="save svelte-pa5evz">Salva</button> <button class="cancel svelte-pa5evz">Annulla</button></div></div>'),ia=O('<div class="task-content svelte-pa5evz"><p> </p></div>'),va=O('<div class="task-display"><div class="task-header svelte-pa5evz"><label class="checkbox-container svelte-pa5evz"><input type="checkbox" class="svelte-pa5evz"> <span class="checkmark svelte-pa5evz"></span></label> <h3> </h3> <div class="task-actions svelte-pa5evz"><button class="edit svelte-pa5evz">Modifica</button> <button class="delete svelte-pa5evz">Elimina</button></div></div> <!></div>'),oa=O("<div><!></div>");function ca(e,t){ce(t,!1);let a=Xe(t,"task",8);const s=$e();let l=L(!1),n=L(a().title),i=L(a().content);function f(){s("update",{...a(),completed:!a().completed})}function u(){s("delete")}function k(){E(l,!0),E(n,a().title),E(i,a().content)}function v(){h(n).trim()&&(s("update",{...a(),title:h(n),content:h(i)}),E(l,!1))}function p(){E(l,!1)}ne();var o=oa();let g;var d=y(o);{var w=r=>{var _=na(),m=y(_);Q(m);var b=N(m,2);be(b);var T=N(b,2),z=y(T),I=N(z,2);A(T),A(_),X(m,()=>h(n),x=>E(n,x)),X(b,()=>h(i),x=>E(i,x)),C("click",z,v),C("click",I,p),D(r,_)},c=r=>{var _=va(),m=y(_),b=y(m),T=y(b);Q(T),Ye(2),A(b);var z=N(b,2);let I;var x=y(z,!0);A(z);var q=N(z,2),B=y(q),_e=N(B,2);A(q),A(m);var he=N(m,2);{var pe=R=>{var V=ia(),$=y(V),ge=y($,!0);A($),A(V),Y(()=>ae(ge,a().content)),D(R,V)};P(he,R=>{a().content&&R(pe)})}A(_),Y(R=>{ra(T,a().completed),I=le(z,1,"svelte-pa5evz",null,I,R),ae(x,a().title)},[()=>({strike:a().completed})],F),C("change",T,f),C("click",B,k),C("click",_e,u),D(r,_)};P(d,r=>{h(l)?r(w):r(c,!1)})}A(o),Y(r=>g=le(o,1,"task svelte-pa5evz",null,g,r),[()=>({completed:a().completed})],F),D(e,o),fe()}var fa=O('<p class="empty-state svelte-dbwufk">Nessuna attività. Aggiungine una!</p>'),ua=O('<main class="svelte-dbwufk"><h1 class="svelte-dbwufk">My To Do List</h1> <div class="add-task svelte-dbwufk"><input type="text" placeholder="Aggiungi un nuovo task..." class="svelte-dbwufk"> <button class="svelte-dbwufk">Aggiungi</button></div> <div class="tasks-container svelte-dbwufk"><!></div></main>');function ma(e,t){ce(t,!1);let a=L([]),s=L(""),l=L(!1);We(()=>{{console.log("Caricamento da localStorage...");const c=localStorage.getItem("tasks");if(console.log("Dati trovati:",c),c)try{E(a,JSON.parse(c)),console.log("Tasks caricati con successo:",h(a))}catch(r){console.error("Errore nel parsing dei task salvati:",r),E(a,[])}E(l,!0)}});function n(){if(h(s).trim()){const c={id:Date.now(),title:h(s),content:"",completed:!1};E(a,[...h(a),c]),E(s,"")}}function i(c){E(a,h(a).filter(r=>r.id!==c))}function f(c){const r=c.detail;E(a,h(a).map(_=>_.id===r.id?r:_))}Ge(()=>(h(l),h(a)),()=>{h(l)&&(console.log("Salvataggio in localStorage:",h(a)),localStorage.setItem("tasks",JSON.stringify(h(a))))}),Je(),ne();var u=ua();Qe(c=>{Fe.title="SvelteKit TaskOnfly beta"});var k=N(y(u),2),v=y(k);Q(v);var p=N(v,2);A(k);var o=N(k,2),g=y(o);{var d=c=>{var r=fa();D(c,r)},w=c=>{var r=Te(),_=Pe(r);je(_,1,()=>h(a),m=>m.id,(m,b)=>{ca(m,{get task(){return h(b)},$$events:{delete:()=>i(h(b).id),update:f}})}),D(c,r)};P(g,c=>{h(a).length===0?c(d):c(w,!1)})}A(o),A(u),X(v,()=>h(s),c=>E(s,c)),C("keydown",v,c=>c.key==="Enter"&&n()),C("click",p,n),D(e,u),fe()}export{ma as component};
